# 2.3 变量与常量

## 目标

- 理解 PHP 变量的命名规则、生命周期与存储方式。
- 掌握引用赋值、可变变量、变量变量等进阶语法。
- 明确常量声明（`const`、`define`）与魔术常量的适用场景。
- 理解全局变量与静态变量的区别和使用场景。
- 遵循变量与常量的最佳实践，编写高质量代码。

## 章节内容

本章分为五个独立小节，每节提供详细的概念解释、语法说明、参数列表和完整示例：

1. **[变量基础](section-01-variable-basics.md)**：变量命名规则、作用域（脚本级、函数级、静态）、动态类型系统、常用操作函数（`isset()`、`empty()`、`unset()`、`gettype()`）及完整示例。

2. **[引用与可变变量](section-02-references.md)**：引用赋值（`$b =& $a`）、引用参数、引用返回、可变变量（`$$var`）的语法、应用场景、注意事项及最佳实践。

3. **[常量](section-03-constants.md)**：`const` 与 `define()` 的区别、语法特点、使用场景、常量命名规范、命名空间常量、魔术常量（`__FILE__`、`__DIR__`、`__LINE__`、`__FUNCTION__`、`__METHOD__`、`__CLASS__`、`__NAMESPACE__` 等）及实际应用。

4. **[全局与静态](section-04-scope-static.md)**：全局变量的访问方式（`global` 关键字、`$GLOBALS` 超全局数组）、静态变量的语法和应用场景、全局变量与静态变量的对比、替代方案（配置类、依赖注入）及完整示例。

5. **[最佳实践与综合练习](section-05-best-practices.md)**：严格类型声明、变量命名规范、类型提示使用、避免全局变量、谨慎使用引用、避免可变变量、常量命名规范、变量存在性检查、静态变量合理使用、综合练习题目及自检清单。

## 学习建议

1. **按顺序学习**：按顺序学习五个小节，每完成一节即编写 2-3 个小练习，加深理解。

2. **重点掌握**：
   - 变量命名规则和作用域机制，这是理解 PHP 变量系统的基础。
   - 引用和可变变量的使用场景和限制，避免滥用。
   - `const` 和 `define()` 的区别，根据场景选择合适的定义方式。
   - 全局变量与静态变量的区别，优先使用更安全、可维护的方式。

3. **实践练习**：
   - 完成每小节后的练习题目。
   - 实现综合练习中的实际项目（Counter 类、日志系统、配置管理器等）。
   - 尝试重构现有代码，应用最佳实践。

4. **理解原理**：
   - 理解 PHP 的动态类型系统和 copy-on-write 机制。
   - 理解变量作用域和生命周期。
   - 理解引用和值传递的区别。

5. **代码审查**：
   - 审查自己的代码，检查是否遵循最佳实践。
   - 识别和避免反模式（过度使用全局变量、不必要的引用等）。

## 完成本章后

- 能够正确命名变量和常量，遵循命名规范。
- 理解变量的作用域机制，能够在不同作用域中正确访问变量。
- 掌握变量的常用操作函数（`isset()`、`empty()`、`unset()` 等）。
- 理解引用赋值和引用参数的使用场景，能够正确使用引用。
- 了解可变变量的语法，但能够识别何时应该避免使用。
- 掌握 `const` 和 `define()` 的区别，能够根据场景选择合适的定义方式。
- 熟悉魔术常量的含义和用法，能够在调试和日志记录中使用。
- 理解全局变量和静态变量的区别，能够选择合适的作用域管理方式。
- 遵循变量与常量的最佳实践，编写高质量、可维护的代码。
- 能够识别和避免常见的反模式，提高代码质量。

## 相关章节

- **2.1 PHP 基本语法结构**：了解 PHP 文件结构和基本语法。
- **2.2 输出与调试**：掌握输出函数和调试技巧。
- **2.4 数据类型**：深入学习 PHP 的数据类型系统。
- **2.5 类型转换**：了解类型转换规则和最佳实践。
- **2.10 函数**：学习函数的作用域和参数传递机制。
