# 5.3.3 $_FILES 与安全处理

## 概述

$_FILES 超全局变量用于处理文件上传。本节介绍 $_FILES 的结构和使用方法，以及文件上传的安全处理，帮助零基础学员掌握安全的文件上传处理。

**章节类型**：语法性章节

**主要内容**：
- $_FILES 超全局变量结构
- 文件上传处理
- 文件信息获取
- 文件验证
- 安全注意事项
- 完整示例

## 核心内容

### $_FILES 结构

- $_FILES 数组结构
- 文件信息字段（name、type、size、tmp_name、error）
- 多文件上传处理

### 文件上传处理

- 文件接收
- 临时文件处理
- 文件移动
- 错误处理

### 文件验证

- 文件类型验证
- 文件大小验证
- 文件扩展名验证
- 文件内容验证

### 安全处理

- 文件名安全
- 存储路径安全
- 权限设置
- 恶意文件防护

## 基本用法

### 文件上传示例

```php
<?php
declare(strict_types=1);

if (isset($_FILES['file'])) {
    $file = $_FILES['file'];
    
    // 验证文件
    if ($file['error'] === UPLOAD_ERR_OK) {
        $tmpName = $file['tmp_name'];
        $destination = '/path/to/upload/' . basename($file['name']);
        move_uploaded_file($tmpName, $destination);
    }
}
```

## 使用场景

- 文件上传功能
- 图片上传
- 文档上传
- 媒体文件处理

## 注意事项

- 文件大小限制
- 文件类型验证
- 存储路径安全
- 恶意文件防护

## 常见问题

- $_FILES 的结构是什么？
- 如何验证上传文件？
- 如何防止文件上传漏洞？
- 如何处理上传错误？

## 最佳实践

- 严格验证文件类型
- 限制文件大小
- 使用安全的文件名
- 存储到安全目录
