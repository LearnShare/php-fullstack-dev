# 5.14.4 路由守卫与权限控制

## 概述

路由守卫用于控制路由的访问权限。本节介绍路由守卫的概念、实现方法、权限检查等，帮助零基础学员实现安全的路由访问控制。

**章节类型**：实践性章节

**主要内容**：
- 路由守卫概念
- 认证守卫
- 权限守卫
- 守卫实现
- 中间件集成
- 完整示例

## 核心内容

### 路由守卫概念

- 什么是路由守卫
- 守卫的作用
- 守卫的类型

### 认证守卫

- 登录检查
- 会话验证
- Token 验证
- 认证失败处理

### 权限守卫

- 权限检查
- 角色检查
- 资源权限
- 权限失败处理

### 守卫实现

- 守卫类设计
- 守卫注册
- 守卫执行
- 守卫组合

## 基本用法

### 路由守卫示例

```php
<?php
declare(strict_types=1);

Route::get('/admin/users', 'AdminController@users')
    ->middleware('auth')
    ->middleware('can:manage-users');
```

## 使用场景

- 权限控制
- 认证检查
- 资源保护
- 访问控制

## 注意事项

- 守卫顺序
- 性能考虑
- 错误处理
- 权限缓存

## 常见问题

- 如何实现路由守卫？
- 认证和权限守卫的区别？
- 如何组合多个守卫？
- 守卫的性能影响？

## 最佳实践

- 使用中间件实现守卫
- 实现权限缓存
- 提供清晰的错误信息
- 记录访问日志
