# 4.4.1 CLI 基础与参数处理

## 概述

CLI（命令行接口）模式是 PHP 的重要执行模式之一。本节介绍 PHP CLI 模式的基础知识，包括如何获取和处理命令行参数，帮助零基础学员掌握 CLI 编程的基础。

**章节类型**：语法性章节

**主要内容**：
- CLI 模式概述
- $argv 和 $argc 变量
- 命令行参数获取
- 参数解析方法
- 选项处理（短选项、长选项）
- getopt() 函数
- 完整示例

## 核心内容

### CLI 模式概述

- CLI 模式与 Web 模式的区别
- CLI 模式的应用场景
- PHP CLI 的启动方式

### 命令行参数

- $argv 数组
- $argc 变量
- 参数索引

### 参数解析

- 简单参数解析
- 选项和参数的区别
- 参数验证

### getopt() 函数

- 语法和参数
- 短选项处理
- 长选项处理
- 必需参数和可选参数

## 基本用法

### 基础参数获取示例

```php
<?php
declare(strict_types=1);

// 获取所有参数
print_r($argv);

// 获取参数数量
echo "参数数量: " . $argc . "\n";
```

### getopt() 示例

```php
<?php
declare(strict_types=1);

// 解析选项
$options = getopt('f:h', ['file:', 'help']);

if (isset($options['f']) || isset($options['file'])) {
    $file = $options['f'] ?? $options['file'];
    echo "文件: $file\n";
}
```

## 使用场景

- 命令行工具开发
- 脚本参数处理
- 批处理任务
- 系统管理工具

## 注意事项

- CLI 模式的检测
- 参数验证
- 错误处理
- 帮助信息

## 常见问题

- 如何检测是否在 CLI 模式运行？
- 如何解析命令行参数？
- getopt() 的选项格式是什么？
- 如何处理必需参数？

## 最佳实践

- 使用 getopt() 处理复杂参数
- 提供帮助信息（-h, --help）
- 验证参数有效性
- 提供清晰的错误提示
