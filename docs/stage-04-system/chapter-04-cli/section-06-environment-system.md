# 4.4.6 环境变量与系统信息

## 概述

环境变量和系统信息是 CLI 程序中的重要数据源。本节介绍 PHP 中获取环境变量和系统信息的方法，包括 $_ENV、getenv()、php_uname() 等，帮助零基础学员掌握系统信息获取。

**章节类型**：参考性章节

**主要内容**：
- 环境变量概述
- $_ENV 超全局变量
- getenv() 函数
- putenv() 函数
- 系统信息获取
- php_uname() 函数
- PHP 配置信息
- 平台检测
- 完整示例

## 核心内容

### 环境变量

- 什么是环境变量
- 环境变量的作用
- 常见环境变量

### 环境变量获取

- $_ENV 超全局变量
- getenv() 函数
- 默认值处理

### 环境变量设置

- putenv() 函数
- 作用域和生命周期
- 持久化设置

### 系统信息

- php_uname() 函数
- 操作系统信息
- 主机名获取
- PHP 版本信息

### 平台检测

- 操作系统检测
- 架构检测
- 功能检测

## 基本用法

### 环境变量示例

```php
<?php
declare(strict_types=1);

// 获取环境变量
$path = getenv('PATH');
$home = $_ENV['HOME'] ?? '';

// 设置环境变量
putenv('MY_VAR=value');
```

### 系统信息示例

```php
<?php
declare(strict_types=1);

// 获取系统信息
$system = php_uname();
echo "系统: $system\n";

// 检测操作系统
if (PHP_OS_FAMILY === 'Windows') {
    echo "Windows 系统\n";
} elseif (PHP_OS_FAMILY === 'Linux') {
    echo "Linux 系统\n";
}
```

## 使用场景

- 配置读取
- 路径解析
- 平台特定功能
- 环境检测

## 注意事项

- 环境变量的可用性
- 跨平台差异
- 安全性考虑
- 默认值处理

## 常见问题

- 如何获取环境变量？
- 环境变量和配置文件的区别？
- 如何检测操作系统？
- 如何获取 PHP 配置信息？

## 最佳实践

- 使用 getenv() 获取环境变量
- 提供合理的默认值
- 检测平台差异
- 注意环境变量的安全性
