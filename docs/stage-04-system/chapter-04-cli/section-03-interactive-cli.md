# 4.4.3 交互式 CLI 与输出格式化

## 概述

交互式 CLI 程序能够与用户进行实时交互，输出格式化能够提升用户体验。本节介绍 PHP 中开发交互式 CLI 程序的方法，包括输入处理、输出格式化、颜色输出、进度条等，帮助零基础学员掌握交互式 CLI 开发。

**章节类型**：实践性章节

**主要内容**：
- 交互式输入处理
- readline() 函数
- 输出格式化
- 颜色输出（ANSI 转义码）
- 进度条实现
- 表格输出
- 完整示例

## 核心内容

### 交互式输入

- readline() 函数
- fgets() 从 STDIN 读取
- 输入验证
- 密码输入处理

### 输出格式化

- 文本对齐
- 表格格式化
- 多行输出
- 清屏操作

### 颜色输出

- ANSI 转义码
- 前景色和背景色
- 文本样式（粗体、下划线等）
- 跨平台兼容性

### 进度条

- 进度条实现原理
- 百分比显示
- 动态更新
- 完成状态

## 基本用法

### 交互式输入示例

```php
<?php
declare(strict_types=1);

// 读取用户输入
$name = readline('请输入您的姓名: ');
echo "您好, $name!\n";
```

### 颜色输出示例

```php
<?php
declare(strict_types=1);

// ANSI 颜色代码
echo "\033[31m红色文本\033[0m\n";
echo "\033[32m绿色文本\033[0m\n";
```

## 使用场景

- 交互式工具开发
- 配置向导
- 数据输入工具
- 用户友好的 CLI 界面

## 注意事项

- 跨平台兼容性
- 终端特性检测
- 输入验证
- 用户体验优化

## 常见问题

- 如何实现交互式输入？
- 如何输出彩色文本？
- 如何实现进度条？
- Windows 下如何处理颜色？

## 最佳实践

- 使用 readline 扩展增强输入
- 检测终端能力
- 提供清晰的提示信息
- 考虑使用第三方库（如 Symfony Console）
