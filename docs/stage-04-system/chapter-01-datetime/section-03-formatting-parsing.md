# 4.1.3 格式化与解析

## 概述

日期时间的格式化和解析是处理日期时间数据的重要操作。本节介绍如何使用 format() 方法格式化日期时间，如何使用 createFromFormat() 方法解析日期字符串，以及格式字符串的详细说明。

**章节类型**：语法性章节

**主要内容**：
- 日期格式化（format() 方法）
- 日期解析（createFromFormat() 方法）
- 格式字符串详解
- 常用格式字符串
- 国际化处理
- 完整示例

## 核心内容

### 日期格式化

- `format()` 方法的使用
- 格式字符串的语法
- 常用格式字符说明

### 日期解析

- `createFromFormat()` 方法的使用
- 从格式字符串创建 DateTime 对象
- 解析错误的处理

### 格式字符串

- 年份格式（Y, y）
- 月份格式（m, n, M, F）
- 日期格式（d, j）
- 时间格式（H, h, i, s）
- 时区格式（O, P, T, e）

### 国际化

- 本地化日期格式化
- 使用 IntlDateFormatter（如果可用）

## 基本用法

### 格式化示例

```php
<?php
declare(strict_types=1);

$date = new DateTime('2025-12-25 10:30:00');

// 格式化输出
echo $date->format('Y-m-d H:i:s'); // 2025-12-25 10:30:00
echo $date->format('Y年m月d日');    // 2025年12月25日
```

### 解析示例

```php
<?php
declare(strict_types=1);

// 从格式字符串创建 DateTime 对象
$date = DateTime::createFromFormat('Y-m-d', '2025-12-25');
```

## 使用场景

- 日期时间数据的展示
- 用户输入的日期时间解析
- 不同格式之间的转换
- API 接口中的日期时间处理

## 注意事项

- 格式字符串必须与日期字符串严格匹配
- 解析失败时 createFromFormat() 返回 false
- 注意格式字符的大小写区别
- 格式化时考虑时区影响

## 常见问题

- format() 方法支持哪些格式字符？
- 如何解析自定义格式的日期字符串？
- 解析失败如何处理？
- 如何格式化中文日期？

## 最佳实践

- 使用标准的日期时间格式（ISO 8601）
- 解析用户输入时进行错误处理
- 在配置中统一管理日期格式
- 考虑使用国际化扩展支持多语言
