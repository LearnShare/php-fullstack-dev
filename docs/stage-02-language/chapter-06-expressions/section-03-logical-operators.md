# 2.6.3 逻辑运算符

## 概述

逻辑运算符用于进行逻辑运算。本节介绍逻辑与（`&&`）、逻辑或（`||`）、逻辑非（`!`）、`and`、`or`、`xor` 的区别、优先级及短路特性。

**章节类型**：语法性章节

**主要内容**：
- 逻辑与（`&&`、`and`）
- 逻辑或（`||`、`or`）
- 逻辑非（`!`）
- 逻辑异或（`xor`）
- 运算符优先级差异
- 短路求值特性
- 使用场景和最佳实践

## 特性

- **短路求值**：`&&` 和 `||` 支持短路求值
- **优先级差异**：`&&`/`||` 和 `and`/`or` 优先级不同
- **布尔转换**：操作数会自动转换为布尔值

## 语法/定义

### 逻辑运算符

| 运算符 | 名称 | 示例 | 说明 |
| :----- | :--- | :--- | :--- |
| `&&` | 逻辑与 | `$a && $b` | 两者都为 true 时返回 true |
| `\|\|` | 逻辑或 | `$a \|\| $b` | 任一为 true 时返回 true |
| `!` | 逻辑非 | `!$a` | 取反 |
| `and` | 逻辑与 | `$a and $b` | 优先级较低 |
| `or` | 逻辑或 | `$a or $b` | 优先级较低 |
| `xor` | 逻辑异或 | `$a xor $b` | 两者不同时返回 true |

### 优先级

**高优先级**：`&&`、`||`
**低优先级**：`and`、`or`

## 基本用法

### 逻辑与示例

```php
<?php
declare(strict_types=1);

$a = true;
$b = false;

$a && $b;  // false
$a and $b; // false（优先级不同）
```

### 逻辑或示例

```php
<?php
declare(strict_types=1);

$a = true;
$b = false;

$a || $b;  // true
$a or $b;  // true（优先级不同）
```

### 短路求值示例

```php
<?php
declare(strict_types=1);

function expensive(): bool
{
    echo "Expensive operation\n";
    return true;
}

false && expensive();  // 不执行 expensive()
true || expensive();    // 不执行 expensive()
```

## 使用场景

- **条件判断**：组合多个条件
- **默认值**：使用 `||` 提供默认值
- **安全检查**：使用 `&&` 进行安全检查

## 注意事项

- **优先级**：`&&`/`||` 优先级高于 `and`/`or`
- **短路求值**：利用短路求值优化性能
- **布尔转换**：操作数会自动转换为布尔值

## 常见问题

### 问题 1：优先级混淆
- **原因**：不理解 `&&`/`||` 和 `and`/`or` 的优先级差异
- **解决**：统一使用 `&&`/`||`，或使用括号

### 问题 2：短路求值误用
- **原因**：不理解短路求值的机制
- **解决**：理解短路求值的执行顺序

## 最佳实践

- 统一使用 `&&`/`||`（优先级更高）
- 利用短路求值优化性能
- 使用括号明确优先级
- 理解布尔转换规则
