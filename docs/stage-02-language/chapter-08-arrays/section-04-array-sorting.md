# 2.8.4 数组排序

## 概述

数组排序是常见的数组操作。本节介绍基于值的排序、保留键的排序、基于键的排序、自定义排序、多字段排序、排序标志及完整示例。

**章节类型**：工具性章节

**主要内容**：
- 基于值的排序（`sort()`、`rsort()`）
- 保留键的排序（`asort()`、`arsort()`）
- 基于键的排序（`ksort()`、`krsort()`）
- 自定义排序（`usort()`、`uasort()`、`uksort()`）
- 多字段排序
- 排序标志（`SORT_REGULAR`、`SORT_NUMERIC`、`SORT_STRING`）
- 排序性能考虑

## 特性

- **多种排序方式**：支持值排序、键排序、自定义排序
- **保留键**：某些函数保留键值关联
- **自定义比较**：支持自定义比较函数

## 基本用法/命令

### 基于值的排序

**sort()**：升序排序（不保留键）
**rsort()**：降序排序（不保留键）

### 保留键的排序

**asort()**：升序排序（保留键）
**arsort()**：降序排序（保留键）

### 基于键的排序

**ksort()**：按键升序排序
**krsort()**：按键降序排序

### 自定义排序

**usort()**：使用自定义函数排序（不保留键）
**uasort()**：使用自定义函数排序（保留键）
**uksort()**：使用自定义函数按键排序

## 使用场景

- **数据展示**：按特定顺序展示数据
- **数据分析**：排序后进行分析
- **算法实现**：实现各种排序算法

## 注意事项

- **修改原数组**：排序函数直接修改原数组
- **保留键**：理解哪些函数保留键
- **性能考虑**：选择合适的排序方法

## 常见问题

### 问题 1：排序后键丢失
- **原因**：使用 `sort()` 等不保留键的函数
- **解决**：使用 `asort()` 等保留键的函数

### 问题 2：自定义排序函数返回值
- **要求**：返回负数、0、正数表示小于、等于、大于
- **解决**：使用太空船运算符（`<=>`）

## 最佳实践

- 根据需求选择合适的排序函数
- 需要保留键时使用 `asort()` 等函数
- 使用太空船运算符简化自定义排序
- 理解排序函数的性能特点
