# 2.8.5 数组解构

## 概述

数组解构是 PHP 7.1+ 引入的特性，可以方便地从数组提取值。本节介绍索引数组解构、关联数组解构、跳过元素、使用默认值、交换变量、函数返回值解构、嵌套解构、在循环中使用、命名参数解构（PHP 8.1+）等。

**章节类型**：语法性章节

**主要内容**：
- 索引数组解构
- 关联数组解构
- 跳过元素
- 使用默认值
- 交换变量
- 函数返回值解构
- 嵌套解构
- 在循环中使用
- 命名参数解构（PHP 8.1+）

## 特性

- **简洁性**：简化数组值提取代码
- **灵活性**：支持跳过元素、默认值
- **可读性**：提高代码可读性

## 语法/定义

### 索引数组解构

**语法**：`[$var1, $var2, $var3] = $array;`
**要求**：PHP 7.1+

### 关联数组解构

**语法**：`['key1' => $var1, 'key2' => $var2] = $array;`
**要求**：PHP 7.1+

### 跳过元素

**语法**：`[$var1, , $var3] = $array;`
**说明**：使用空位跳过元素

### 默认值

**语法**：`[$var1 = 'default', $var2] = $array;`
**说明**：如果数组元素不存在，使用默认值

## 基本用法

### 索引数组解构示例

```php
<?php
declare(strict_types=1);

[$a, $b, $c] = [1, 2, 3];
```

### 关联数组解构示例

```php
<?php
declare(strict_types=1);

['name' => $name, 'age' => $age] = ['name' => 'John', 'age' => 25];
```

### 跳过元素示例

```php
<?php
declare(strict_types=1);

[$first, , $third] = [1, 2, 3];  // 跳过第二个元素
```

### 默认值示例

```php
<?php
declare(strict_types=1);

[$a = 0, $b = 0] = [1];  // $a = 1, $b = 0
```

### 交换变量示例

```php
<?php
declare(strict_types=1);

[$a, $b] = [$b, $a];  // 交换变量值
```

### 函数返回值解构示例

```php
<?php
declare(strict_types=1);

function getValues(): array
{
    return [1, 2, 3];
}

[$a, $b, $c] = getValues();
```

## 使用场景

- **函数返回值**：解构函数返回的数组
- **配置读取**：从配置数组提取值
- **变量交换**：交换变量值

## 注意事项

- **版本要求**：需要 PHP 7.1+
- **数组结构**：确保数组结构与解构模式匹配
- **默认值**：使用默认值处理缺失元素

## 常见问题

### 问题 1：数组结构不匹配
- **原因**：解构模式与数组结构不匹配
- **解决**：使用默认值或检查数组结构

### 问题 2：版本要求
- **原因**：使用了不支持的 PHP 版本
- **解决**：确保 PHP 版本 >= 7.1

## 最佳实践

- 使用数组解构简化代码
- 使用默认值处理缺失元素
- 理解解构的语法和限制
- 注意版本要求
