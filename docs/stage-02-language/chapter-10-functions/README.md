# 2.10 函数与作用域

## 目标

- 掌握函数定义、参数类型、默认值、可变参数与返回类型。
- 理解作用域（局部、全局、静态）和闭包中的 `use` 语义。
- 熟悉函数式工具（回调、可变参数、尾调用）与常用内置函数。
- 理解可调用类型和命名参数的使用。

## 章节内容

本章分为四个独立小节，每节提供详细的概念解释、语法说明、参数列表和完整示例：

1. **[函数基础](section-01-function-basics.md)**：函数定义、参数类型、默认值、可选参数、可空类型、联合类型、返回值类型、早返回、命名参数（PHP 8.0+）及完整示例。

2. **[可变参数](section-02-variable-arguments.md)**：可变参数语法（`...` 运算符）、`func_get_args()`、`func_num_args()`、`func_get_arg()`、展开运算符的使用及完整示例。

3. **[引用、箭头函数与闭包](section-03-references-closures.md)**：引用传参、箭头函数（PHP 7.4+）、闭包、变量捕获（按值、按引用）、闭包作为返回值/参数及完整示例。

4. **[可调用类型与内置函数](section-04-callable-types.md)**：可调用类型的各种形式、`is_callable()`、`call_user_func()`、`call_user_func_array()`、内置函数工具及完整示例。

## 函数定义示例

```php
function greet(string $name, string $title = 'Mr.'): string
{
    return "Hello {$title} {$name}";
}
```

## 作用域

- **局部作用域**：函数内部定义的变量外部不可见。
- **全局作用域**：脚本顶级作用域。
- **静态变量**：函数内部的 `static $count = 0;`，在多次调用间持久化。
- 使用 `global $var;` 或 `$GLOBALS['var']` 访问全局变量（应尽量避免）。

## 学习建议

1. **按顺序学习**：按顺序学习四个小节，理解函数的各种特性和用法。

2. **重点掌握**：
   - 函数参数和返回值的类型声明
   - 可变参数的使用
   - 引用传参的场景
   - 箭头函数和闭包的区别
   - 可调用类型的各种形式

3. **实践练习**：
   - 完成每小节后的练习题目
   - 实现实际的函数功能
   - 使用函数式编程风格处理数据

4. **理解原理**：
   - 理解作用域和变量生命周期
   - 理解闭包的变量捕获机制
   - 理解可调用类型的实现原理

## 完成本章后

- 能够定义和使用各种类型的函数。
- 理解函数参数和返回值的类型声明。
- 掌握可变参数和引用传参的使用。
- 理解箭头函数和闭包的区别和使用场景。
- 熟悉可调用类型的各种形式和使用方法。
- 能够编写函数式风格的代码。

## 相关章节

- **2.3 变量与常量**：了解变量的作用域。
- **2.6 表达式与运算符**：了解函数中的表达式。
- **2.11 匿名函数与闭包**：深入学习闭包的高级特性。
