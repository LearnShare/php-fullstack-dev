# 2.11.5 路径处理和返回值

## 概述

文件导入时，路径处理很重要。本节介绍路径处理最佳实践（`__DIR__`、相对路径、绝对路径、跨平台处理）、返回值的使用（配置返回、条件返回、返回函数）。

**章节类型**：实践性章节

**主要内容**：
- 路径处理最佳实践
- `__DIR__` 常量的使用
- 相对路径和绝对路径
- 跨平台路径处理
- 文件返回值的使用
- 配置返回模式
- 条件返回模式
- 返回函数模式

## 核心内容

### 路径处理

**__DIR__**：当前文件所在目录
**相对路径**：相对于当前文件的路径
**绝对路径**：完整的文件系统路径

### 文件返回值

**配置返回**：文件返回配置数组
**条件返回**：根据条件返回不同值
**返回函数**：文件返回函数

## 基本用法

### 使用 __DIR__ 示例

```php
<?php
declare(strict_types=1);

require __DIR__ . '/config.php';
require __DIR__ . '/../vendor/autoload.php';
```

### 配置返回示例

```php
<?php
declare(strict_types=1);

// config.php
return [
    'db_host' => 'localhost',
    'db_name' => 'mydb'
];

// 使用
$config = require 'config.php';
```

### 条件返回示例

```php
<?php
declare(strict_types=1);

// config.php
if (getenv('APP_ENV') === 'production') {
    return require 'config.prod.php';
}
return require 'config.dev.php';
```

## 使用场景

- **配置管理**：使用返回值管理配置
- **路径处理**：正确处理文件路径
- **跨平台**：处理不同操作系统的路径

## 注意事项

- **路径分隔符**：Windows 和 Unix 使用不同的路径分隔符
- **返回值**：文件可以返回值
- **相对路径**：注意相对路径的基准

## 常见问题

### 问题 1：路径错误
- **原因**：相对路径基准不正确
- **解决**：使用 `__DIR__` 或绝对路径

### 问题 2：跨平台问题
- **原因**：路径分隔符不同
- **解决**：使用 `DIRECTORY_SEPARATOR` 或 `/`

## 最佳实践

- 使用 `__DIR__` 处理路径
- 使用返回值管理配置
- 注意跨平台路径处理
- 使用绝对路径提高可靠性
