# 2.7.2 常用字符串函数

## 概述

PHP 提供了丰富的字符串处理函数。本节介绍常用字符串函数的语法、参数、返回值和使用场景，包括长度计算、查找定位、截取、替换、去除空白、大小写转换、分割拼接、格式化等。

**章节类型**：参考性章节

**主要内容**：
- 长度计算函数（`strlen`、`mb_strlen`）
- 查找定位函数（`strpos`、`mb_strpos`、`strrpos`）
- 截取函数（`substr`、`mb_substr`）
- 替换函数（`str_replace`、`preg_replace`）
- 去除空白函数（`trim`、`ltrim`、`rtrim`）
- 大小写转换函数（`strtolower`、`strtoupper`、`ucfirst`、`ucwords`）
- 分割拼接函数（`explode`、`implode`、`join`）
- 格式化函数（`sprintf`、`vsprintf`）
- 多字节字符串处理

## 特性

- **函数丰富**：提供大量字符串处理函数
- **多字节支持**：`mb_*` 系列函数支持多字节字符
- **性能优化**：选择合适的函数提高性能

## 基本用法/命令

### 长度计算

**strlen()**：计算字节长度
**mb_strlen()**：计算字符长度（支持多字节）

### 查找定位

**strpos()**：查找子串首次出现位置
**mb_strpos()**：多字节版本
**strrpos()**：查找子串最后出现位置

### 截取

**substr()**：截取子串
**mb_substr()**：多字节版本

### 替换

**str_replace()**：字符串替换
**preg_replace()**：正则替换

### 去除空白

**trim()**：去除两端空白
**ltrim()**：去除左端空白
**rtrim()**：去除右端空白

### 大小写转换

**strtolower()**：转换为小写
**strtoupper()**：转换为大写
**ucfirst()**：首字母大写
**ucwords()**：每个单词首字母大写

### 分割拼接

**explode()**：分割字符串为数组
**implode()**：将数组拼接为字符串
**join()**：`implode()` 的别名

## 使用场景

- **数据处理**：处理用户输入、格式化输出
- **文本分析**：查找、替换、提取文本
- **字符串操作**：分割、拼接、转换

## 注意事项

- **多字节字符**：处理中文等多字节字符时使用 `mb_*` 函数
- **性能考虑**：选择合适的函数提高性能
- **编码问题**：确保使用正确的字符编码

## 常见问题

### 问题 1：中文字符长度错误
- **原因**：使用 `strlen()` 计算多字节字符
- **解决**：使用 `mb_strlen()`

### 问题 2：中文字符截取乱码
- **原因**：使用 `substr()` 截取多字节字符
- **解决**：使用 `mb_substr()`

## 最佳实践

- 处理多字节字符时使用 `mb_*` 函数
- 选择合适的函数提高性能
- 理解函数的参数和返回值
- 注意字符编码问题
