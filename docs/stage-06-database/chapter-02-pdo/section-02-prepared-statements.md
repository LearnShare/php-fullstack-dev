# 6.2.2 预处理语句与防注入

## 概述

预处理语句是防止 SQL 注入的关键技术。本节介绍预处理语句的概念、使用方法、参数绑定等，帮助零基础学员掌握安全的数据库操作。

**章节类型**：语法性章节

**主要内容**：
- 预处理语句概念
- prepare() 方法
- 参数绑定（命名参数、位置参数）
- execute() 方法
- 防注入原理
- 完整示例

## 核心内容

### 预处理语句概念

- 什么是预处理语句
- 预处理语句的优势
- 防注入原理

### prepare() 方法

- 语法和参数
- SQL 语句准备
- 占位符使用（:name、?）
- 语句对象

### 参数绑定

- bindValue() 方法
- bindParam() 方法
- 命名参数绑定
- 位置参数绑定

### execute() 方法

- 执行预处理语句
- 参数传递
- 返回值
- 错误处理

## 基本用法

### 预处理语句示例

```php
<?php
declare(strict_types=1);

// 命名参数
$stmt = $pdo->prepare('SELECT * FROM users WHERE email = :email');
$stmt->execute(['email' => $email]);
$user = $stmt->fetch();

// 位置参数
$stmt = $pdo->prepare('SELECT * FROM users WHERE id = ?');
$stmt->execute([$id]);
$user = $stmt->fetch();
```

## 使用场景

- 所有数据库操作
- 用户输入处理
- 动态查询
- 安全敏感操作

## 注意事项

- 始终使用预处理语句
- 参数绑定方式
- 类型处理
- 错误处理

## 常见问题

- 为什么使用预处理语句？
- 命名参数和位置参数的区别？
- 如何防止 SQL 注入？
- 预处理语句的性能影响？

## 最佳实践

- 始终使用预处理语句
- 使用命名参数提高可读性
- 验证输入数据
- 处理执行错误
