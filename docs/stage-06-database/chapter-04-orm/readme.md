# 第 6.4 章：ORM 框架与数据迁移

## 章节概述

在我们之前的学习中，我们使用 PDO 来执行原生的 SQL 语句与数据库进行交互。虽然这种方式直接且灵活，但在大型项目中，手写大量的 SQL 语句会变得非常繁琐、容易出错，并且使得数据操作逻辑与业务逻辑紧密耦合。

为了解决这些问题，**ORM (Object-Relational Mapping)** 应运而生。ORM 是一种编程技术，它在关系型数据库和面向对象的编程语言之间建立起一座桥梁。通过 ORM，我们可以将数据库中的**表 (Table)** 映射为代码中的**类 (Class)**，将表中的**行 (Row)** 映射为**对象 (Object)**，将表中的**字段 (Field)** 映射为对象的**属性 (Property)**。这样，我们就可以用操作对象的方式来操作数据库，而无需编写一句 SQL。

本章将重点介绍 PHP 生态中最流行、最优雅的 ORM 之一——**Eloquent ORM**（源自 Laravel 框架，但可以独立使用）。我们还将学习与之配套的另一个关键概念——**数据迁移 (Data Migrations)**，这是一种使用代码来管理和版本控制数据库结构（Schema）的强大机制。

## 学习目标

完成本章学习后，你将能够：

-   **理解 ORM 的核心思想**：明确 ORM 是什么，以及它解决了什么问题。
-   **掌握 Eloquent ORM 的基本使用**：能够独立安装和配置 Eloquent，并定义模型类来映射数据库表。
-   **使用 Eloquent 执行 CRUD 操作**：能够用面向对象的方式来创建、读取、更新和删除数据。
-   **理解和定义模型间的关系**：能够使用 Eloquent 定义并操作一对一、一对多、多对多等关系。
-   **掌握数据迁移的核心概念**：理解为什么需要用代码来管理数据库结构。
-   **使用 Phinx 进行数据迁移**：能够编写迁移文件来创建、修改和删除数据表，实现数据库结构的版本控制。

## 章节结构

本章分为以下几个核心小节：

-   **[6.4.1 ORM 核心思想与 Eloquent 初探](section-01-orm-eloquent-intro.md)**：介绍 ORM 的概念、优缺点，并完成 Eloquent ORM 的独立安装与配置。
-   **[6.4.2 Eloquent 模型与 CRUD 操作](section-02-eloquent-crud.md)**：学习如何定义 Eloquent 模型，并使用它来进行基本的增删改查操作。
-   **[6.4.3 Eloquent 模型关系](section-03-eloquent-relationships.md)**：深入学习如何在 Eloquent 模型之间定义和使用一对一、一对多、多对多等关联关系。
-   **[6.4.4 数据迁移与 Phinx](section-04-migrations-phinx.md)**：介绍数据迁移的概念，并学习如何使用 Phinx 这一流行的迁移工具来管理数据库 Schema。