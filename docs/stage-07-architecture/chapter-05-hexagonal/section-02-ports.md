# 7.5.2 Ports（端口）

## 概述

端口定义了应用与外部世界的接口。本节介绍端口的概念、输入端口、输出端口的设计方法，帮助零基础学员掌握端口设计。

**章节类型**：概念性章节

**主要内容**：
- 端口概念
- 输入端口（驱动端口）
- 输出端口（被驱动端口）
- 端口设计原则
- 接口定义
- 完整示例

## 核心内容

### 端口概念

- 什么是端口
- 端口的作用
- 端口的类型

### 输入端口

- 驱动端口概念
- 用例接口
- 服务接口
- 输入端口设计

### 输出端口

- 被驱动端口概念
- 仓储接口
- 外部服务接口
- 输出端口设计

### 端口设计

- 接口设计原则
- 接口粒度
- 接口命名
- 接口文档

## 基本用法

### 端口设计示例

```php
<?php
declare(strict_types=1);

// 输入端口（用例）
interface CreateUserUseCase {
    public function execute(CreateUserRequest $request): User;
}

// 输出端口（仓储）
interface UserRepository {
    public function save(User $user): void;
    public function find(int $id): ?User;
}
```

## 使用场景

- 业务接口定义
- 外部依赖抽象
- 测试隔离
- 技术无关设计

## 注意事项

- 接口设计
- 接口粒度
- 接口稳定性
- 接口文档

## 常见问题

- 什么是端口？
- 输入端口和输出端口的区别？
- 如何设计端口？
- 端口的粒度如何控制？

## 最佳实践

- 设计清晰的端口
- 保持接口稳定
- 提供完整文档
- 考虑测试需求
