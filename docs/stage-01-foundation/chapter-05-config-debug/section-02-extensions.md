# 1.5.2 扩展管理

## 概述

PHP 扩展提供了额外的功能，如数据库连接、图像处理、加密等。本节介绍如何检查、安装和管理 PHP 扩展，以及常用扩展的配置。

**章节类型**：配置性章节

**主要内容**：
- 扩展类型（核心扩展、PECL 扩展、第三方扩展）
- 检查已安装的扩展
- 安装方法（Windows、macOS、Linux、Docker）
- 常用扩展介绍（PDO、mysqli、gd、curl、mbstring、openssl、zip）
- 扩展配置
- 扩展启用和禁用

## 特性

- **功能扩展**：通过扩展提供额外功能
- **按需安装**：只安装需要的扩展
- **版本管理**：不同 PHP 版本需要对应的扩展版本
- **配置灵活**：可以为扩展单独配置

## 配置步骤/语法

### 扩展类型

**核心扩展**：
- PHP 内置的扩展
- 默认启用或可选启用

**PECL 扩展**：
- 通过 PECL 安装的扩展
- 需要编译安装

**第三方扩展**：
- 第三方提供的扩展
- 安装方法因扩展而异

### 检查已安装的扩展

**命令行检查**：
- `php -m`：列出所有已加载的扩展
- `php -i | grep extension`：查看扩展信息
- `php --ri extension_name`：查看特定扩展信息

**代码中检查**：
- `extension_loaded('extension_name')`：检查扩展是否加载
- `phpinfo()`：查看所有扩展信息

### 安装方法

**Windows**：
- 下载预编译的扩展 DLL
- 修改 php.ini 启用扩展
- 重启 Web 服务器

**macOS**：
- 使用 Homebrew 安装
- 使用 PECL 安装

**Linux**：
- 使用包管理器安装（apt、yum）
- 使用 PECL 编译安装

**Docker**：
- 在 Dockerfile 中安装扩展
- 使用官方扩展安装脚本

### 常用扩展

**PDO**：
- 数据库抽象层
- 支持多种数据库

**mysqli**：
- MySQL 改进扩展
- 面向对象和过程式接口

**gd**：
- 图像处理扩展
- 图像创建和编辑

**curl**：
- HTTP 客户端扩展
- 发送 HTTP 请求

**mbstring**：
- 多字节字符串处理
- 处理中文等多字节字符

**openssl**：
- 加密扩展
- SSL/TLS 支持

**zip**：
- ZIP 文件处理
- 创建和提取 ZIP 文件

### 扩展配置

**启用扩展**：
- 在 php.ini 中使用 `extension=extension_name.so`（Linux/macOS）
- 在 php.ini 中使用 `extension=extension_name.dll`（Windows）

**扩展特定配置**：
- 在 php.ini 中配置扩展选项
- 使用独立的配置文件

## 注意事项

- **版本兼容性**：确保扩展版本与 PHP 版本兼容
- **依赖关系**：某些扩展依赖其他库
- **性能影响**：不必要的扩展可能影响性能
- **安全考虑**：只启用需要的扩展
- **配置备份**：修改前备份配置文件

## 常见问题

### 问题 1：扩展未加载
- **原因**：扩展未安装、配置错误、路径问题
- **解决**：检查扩展安装、配置文件、文件路径

### 问题 2：扩展功能不可用
- **原因**：扩展未启用、配置错误
- **解决**：检查扩展是否启用、配置是否正确

### 问题 3：版本不兼容
- **原因**：扩展版本与 PHP 版本不匹配
- **解决**：安装匹配的扩展版本

### 问题 4：编译安装失败
- **原因**：缺少依赖库、编译工具
- **解决**：安装依赖库和编译工具

## 最佳实践

- 只安装需要的扩展
- 定期更新扩展到最新稳定版本
- 使用包管理器安装扩展（如果可用）
- 记录扩展安装步骤，便于环境复现
- 在 Docker 中统一管理扩展安装
- 测试扩展功能，确保正常工作
